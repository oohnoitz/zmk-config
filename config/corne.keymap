/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

#define ZMK_MOUSE_DEFAULT_MOVE_VAL 1500
#define ZMK_MOUSE_DEFAULT_SCRL_VAL 20

#include <behaviors.dtsi>
#include <behaviors/mouse_keys.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/mouse.h>

&mt {
  tapping-term-ms = <200>;
  flavor = "tap-preferred";
  quick-tap-ms = <200>;
};

&mmv {
  acceleration-exponent = <1>;
  time-to-max-speed-ms = <500>;
  delay-ms = <0>;
};

&msc {
  acceleration-exponent = <1>;
  time-to-max-speed-ms = <40>;
  delay-ms = <0>;
};

&sk {
  quick-release;
};

/ {
  keymap {
    compatible = "zmk,keymap";

    default_layer {
      bindings = <
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &kp TAB          &kp Q            &kp W            &kp E            &kp R            &kp T                  &kp Y            &kp U            &kp I            &kp O            &kp P            &kp DEL
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &mt LCTRL ESC    &kp A            &kp S            &kp D            &kp F            &kp G                  &kp H            &kp J            &kp K            &kp L            &kp SQT          &sk LALT
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &sk LSHFT        &kp Z            &kp X            &kp C            &kp V            &kp B                  &kp N            &kp M            &kp COMMA        &kp DOT          &kp SEMI         &mo 5
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
                                                              &mo 4            &lt 2 TAB        &mt LGUI SPACE         &mt LGUI RET     &lt 3 BSPC       &sk LSHFT
      //                                                    +----------------+----------------+----------------+     +----------------+----------------+----------------+
      >;
    };

    colemak_layer {
      bindings = <
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &kp TAB          &kp Q            &kp W            &kp F            &kp P            &kp B                  &kp J            &kp L            &kp U            &kp Y            &kp SQT          &kp DEL
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &mt LCTRL ESC    &kp A            &kp R            &kp S            &kp T            &kp G                  &kp M            &kp N            &kp E            &kp I            &kp O            &sk LALT
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &sk LSHFT        &kp Z            &kp X            &kp C            &kp D            &kp V                  &kp K            &kp H            &kp COMMA        &kp DOT          &kp SEMI         &mo 5
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
                                                              &mo 4            &lt 2 TAB        &mt LGUI SPACE         &mt LGUI RET     &lt 3 BSPC       &sk LSHFT
      //                                                    +----------------+----------------+----------------+     +----------------+----------------+----------------+
      >;
    };

    nav_layer {
      bindings = <
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &none            &msc SCRL_UP     &msc SCRL_DOWN   &none            &none                  &kp HOME         &kp PG_DN        &kp PG_UP        &kp END          &none            &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &kp C_PP         &kp C_PREV       &kp C_NEXT       &kp C_VOL_DN     &kp C_VOL_UP           &kp LEFT         &kp DOWN         &kp UP           &kp RIGHT        &kp K_APP        &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &none            &none            &none            &none            &none                  &mmv MOVE_LEFT   &mmv MOVE_DOWN   &mmv MOVE_UP     &mmv MOVE_RIGHT  &none            &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
                                                              &trans           &trans           &trans                 &mkp LCLK        &mkp RCLK        &mkp MCLK
      //                                                    +----------------+----------------+----------------+     +----------------+----------------+----------------+
      >;
    };

    sym_layer {
      bindings = <
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &kp EXCL         &kp AT           &kp HASH         &kp DLLR         &kp PRCNT              &kp CARET        &kp AMPS         &kp ASTRK        &kp QMARK        &kp SQT          &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &kp PLUS         &kp EQUAL        &kp LPAR         &kp RPAR         &kp DQT                &kp COLON        &kp RBKT         &kp LBKT         &kp RBRC         &kp LBRC         &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &kp LT           &kp PIPE         &kp MINUS        &kp GT           &kp BSLH               &kp GRAVE        &kp UNDER        &kp FSLH         &kp TILDE        &kp SEMI         &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
                                                              &trans           &trans           &trans                 &trans           &trans           &trans
      //                                                    +----------------+----------------+----------------+     +----------------+----------------+----------------+
      >;
    };

    num_layer {
      bindings = <
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &kp F1           &kp F2           &kp F3           &kp F4           &kp F5                 &kp F6           &kp F7           &kp F8           &kp F9           &kp F10          &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &kp N1           &kp N2           &kp N3           &kp N4           &kp N5                 &kp N6           &kp N7           &kp N8           &kp N9           &kp N0           &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &kp F11          &kp F12          &none            &none            &none                  &none            &none            &none            &none            &none            &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
                                                              &trans           &trans           &trans                 &trans           &trans           &trans
      //                                                    +----------------+----------------+----------------+     +----------------+----------------+----------------+
      >;
    };

    fun_layer {
      bindings = <
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &bt BT_CLR       &bt BT_SEL 0     &bt BT_SEL 1     &bt BT_SEL 2     &bt BT_SEL 3     &bt BT_SEL 4           &none            &none            &none            &none            &none            &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &to 0            &to 1            &none            &none            &none            &none                  &none            &none            &none            &none            &none            &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
           &trans           &none            &none            &none            &none            &none                  &none            &none            &none            &none            &none            &trans
      // +----------------+----------------+----------------+----------------+----------------+----------------+     +----------------+----------------+----------------+----------------+----------------+----------------+
                                                              &trans           &trans           &trans                 &trans           &trans           &trans
      //                                                    +----------------+----------------+----------------+     +----------------+----------------+----------------+
      >;
    };

  };
};
